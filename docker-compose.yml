services:
  ntrp-backend:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: ntrp-backend
    restart: unless-stopped
    ports:
      - "${NTRP_PORT:-8000}:8000"
    volumes:
      - ntrp-data:/home/ntrp/.ntrp
      # obsidian vault, comment if not using (and change ro to rw if you need to edit)
      - ${NTRP_VAULT_PATH}:/vault:ro
    env_file: .env
    environment:
      - NTRP_VAULT_PATH=/vault
      # browser history doesn't work in docker
      - NTRP_BROWSER=
    networks:
      - ntrp-network

volumes:
  ntrp-data:
    driver: local

networks:
  ntrp-network:
    driver: bridge
